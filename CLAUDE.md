# Claude Code 프로젝트 가이드

## 제1 규칙: 지시사항 집중
**사용자가 지시한 내용에만 집중하고, 요청하지 않은 추가 작업이나 개선사항을 임의로 포함하지 말 것**

## 프로젝트 개요
이 프로젝트는 Next.js와 TypeScript를 기반으로 하는 관리 시스템입니다.

## 언어 사용 규칙
- **모든 설명과 커뮤니케이션은 한국어로 진행**
- 코드 내 주석도 한국어로 작성
- 변수명과 함수명은 영어 사용 (프로그래밍 컨벤션 준수)
- 사용자 인터페이스 텍스트는 한국어 사용

## 주요 기능 모듈

## 개발 규칙

### 코드 스타일
- TypeScript 엄격 모드 사용
- Material-UI 컴포넌트 활용
- 함수형 컴포넌트와 React Hooks 사용

### 데이터 관리
- 상태 관리는 useState와 props drilling 방식 사용
- 타입 정의는 `types/` 폴더에서 관리
- 모든 데이터 인터페이스는 TypeScript로 정의

### 사용자 정보 필드 명명 규칙
- **position**: 직급 (예: CL 1, CL 2, CL 3)
- **role**: 직책 (예: 프로, 파트장, 팀장)
- 이 두 필드를 혼동하지 말 것

### 데이터베이스 명명 규칙
- **Supabase 테이블명**: `{메뉴명}_{페이지명}_{기능명}` (모두 소문자 + 언더스코어)
  - 예시: `admin_systemsetting_menu`, `admin_user_management`, `main_task_management`
- **PostgreSQL 호환성**: 따옴표 없이도 정확한 테이블명 사용 가능
- **일관성**: 모든 테이블이 snake_case 형식으로 통일
- **ID 타입 규칙**: 신규 DB 생성 시 id는 항상 **int4** 사용
  - 이유: 내부 시스템, 중소 규모, 성능 우선, 디버깅 편의성
  - UUID는 글로벌 SaaS나 MSA 구조에서만 고려
- **현재 적용 테이블**:
  - `admin_systemsetting_menu`: 시스템설정 메뉴관리 (9개 데이터)

### 파일 구조
```
src/
├── views/apps/          # 주요 페이지 컴포넌트
├── components/          # 재사용 컴포넌트  
├── types/              # TypeScript 타입 정의
├── data/               # 목업 데이터
└── ...
```

### 명령어
- 개발 서버: `npm run dev`
- 빌드: `npm run build`
- 타입 체크: `npm run typecheck`
- 린트: `npm run lint`

### Supabase 관리
- **CLI 버전**: 2.40.7
- **실행 방법**: `npx supabase [명령어]`
- **직접 SQL 실행**: `node [스크립트명].js` (PostgreSQL 직접 연결)
- **환경변수**: `.env.local`에서 SUPABASE_URL, SUPABASE_ANON_KEY 설정

## 최근 수정 사항

### 시스템설정 메뉴관리 구현 (2025-09-13)
1. **Supabase 데이터베이스 연동**
   - `admin_systemsetting_menu` 테이블 생성 및 데이터 연동
   - PostgreSQL 직접 연결 방식으로 안정적인 SQL 실행
   - 9개 메뉴 항목 샘플 데이터 구성

2. **메뉴관리 컴포넌트 개발**
   - `SystemMenuPermissionsTable.tsx`: 메뉴 테이블 관리
   - `useSupabaseMenuManagement.ts`: Supabase 연동 훅
   - 체크박스 기반 사용/미사용 토글 기능
   - 설명 텍스트 입력 및 실시간 업데이트

3. **기술적 해결사항**
   - 테이블명 대소문자 문제 해결 (PostgreSQL 특성 고려)
   - React 컴포넌트 아이콘 매핑 시스템 구현
   - 빈 오류 객체 디버깅 및 상세 로깅 시스템 추가


## 문제 해결 가이드

### 자주 발생하는 문제
1. **데이터 동기화 문제**: props를 통한 상태 전달 확인
2. **타입 에러**: types 폴더의 인터페이스 정의 확인  
3. **스타일링 문제**: Material-UI sx prop 사용법 확인

### 디버깅 팁
- 브라우저 개발자 도구의 React DevTools 활용
- TypeScript 에러 메시지 주의 깊게 확인
- 콘솔 에러 로그 모니터링

## 사용자 피드백 규칙 (2025-09-14)
- **시키지 않은 불필요한 시각적 효과나 디자인 요소를 추가하지 말것**
- **요청된 기본 기능만 구현할것**
- **추가 기능이나 개선사항을 임의로 포함하지 말것**
- **오류 개선시 임시적 해결이 아닌, 근본적인 원인 분석과 계획을 수립해서 개선할것**
- **과도한 스타일링이나 애니메이션 효과 금지**
- **지시사항에만 집중할것 - 요청하지 않은 추가 정보나 UI 요소를 임의로 추가하지 말것**
- **개발 서버를 직접 실행하거나 재시작하지 말것 - 사용자가 직접 관리함**